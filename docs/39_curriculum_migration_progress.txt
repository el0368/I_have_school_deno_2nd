SESSION SUMMARY: MDX Curriculum Migration
==========================================
Date: 2026-02-22

WHAT WE ACCOMPLISHED
---------------------

1. FIXED THE MDX ROUTING SYSTEM
   - Discovered that the old catch-all route file `routes/learn/[...path].tsx`
     was conflicting with the custom `app.get("*")` handler in `main.ts`.
   - Deleted the entire `routes/learn/` folder to resolve the conflict.
   - Removed an invalid `$fresh/runtime.ts` import from `CurriculumLayout.tsx`
     that was causing Vite to crash during SSR compilation.
   - The MDX router now works correctly: Vite discovers curriculum files via
     `import.meta.glob` in `mdx-routes.ts`, and `main.ts` serves them through
     a `CurriculumLayout` sidebar wrapper for any path under `/learn/`.

2. ESTABLISHED THE NESTED CURRICULUM STRUCTURE
   - Abandoned the old flat `curriculums/math/by_grade/*.mdx` approach.
   - Adopted a deep nested structure mirroring Khan Academy's real layout:
     curriculums/math/[grade]/[unit_folder]/[topic].mdx
   - Example live URL:
     /learn/math/grade_1/unit_1_place_value/1_numbers_from_1_to_9

3. MIGRATED GRADE 1 (3 Units, 25 Topics)
   - Unit 1: Place Value (4 topics + quiz + unit test)
   - Unit 2: Addition and Subtraction (13 topics + 4 quizzes + unit test)
   - Unit 3: Measurement, Data, and Geometry (8 topics + 2 quizzes + unit test)
   - Deleted old flat `grade_1.mdx` from `by_grade/`.

4. MIGRATED GRADE 2 (8 Units, 50+ Topics)
   - Unit 1: Add and Subtract within 20 (4 topics)
   - Unit 2: Place Value (12 topics)
   - Unit 3: Add and Subtract within 100 (8 topics)
   - Unit 4: Add and Subtract within 1,000 (11 topics)
   - Unit 5: Money and Time (6 topics)
   - Unit 6: Measurement (4 topics)
   - Unit 7: Data (3 topics)
   - Unit 8: Geometry (6 topics)
   - All units include a unit quiz and unit test.
   - Deleted old flat `grade_2.mdx` from `by_grade/`.

CURRENT STATE
-------------
- Grades 3 through 8 and Kindergarten still exist as flat `.mdx` files
  in `curriculums/math/by_grade/`. They are routable but not yet in the
  nested unit/topic format.
- The dev server is running at http://127.0.0.1:5173/

NEXT STEPS (WHEN READY)
------------------------
- Continue migrating Grades 3-8 into the same nested unit/topic structure.
- Consider building an index/overview page for each grade and unit.
- Enhance CurriculumLayout with a dynamic sidebar reflecting the unit tree.
